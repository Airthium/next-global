{"version":3,"sources":["../../../src/server/index.ts"],"sourcesContent":["import { createServer } from 'http'\nimport { parse } from 'url'\nimport next from 'next'\n\nconst dev = process.env.NODE_ENV !== 'production'\nconst hostname = 'localhost'\nconst port = 3000\n// when using middleware `hostname` and `port` must be provided below\nconst app = next({ dev, hostname, port })\nconst handle = app.getRequestHandler()\n\n// Initialize\nObject.defineProperty(global, 'myvar', {\n  value: { test: true },\n  configurable: true,\n})\n\napp.prepare().then(() => {\n  createServer((req: any, res: any) => {\n    try {\n      // Be sure to pass `true` as the second argument to `url.parse`.\n      // This tells it to parse the query portion of the URL.\n      const parsedUrl = parse(req.url, true)\n      handle(req, res, parsedUrl).catch((err) => {\n        console.error('Error occurred handling', req.url, err)\n        res.statusCode = 500\n        res.end('internal server error')\n      })\n    } catch (err) {\n      console.error('Error occurred handling', req.url, err)\n      res.statusCode = 500\n      res.end('internal server error')\n    }\n  })\n    .once('error', (err) => {\n      console.error(err)\n      process.exit(1)\n    })\n    .listen(port, () => {\n      console.log(`> Ready on http://${hostname}:${port}`)\n    })\n})\n"],"names":["createServer","parse","next","dev","process","env","NODE_ENV","hostname","port","app","handle","getRequestHandler","Object","defineProperty","global","value","test","configurable","prepare","then","req","res","parsedUrl","url","catch","err","console","error","statusCode","end","once","exit","listen","log"],"mappings":"AAAA,SAASA,YAAY,QAAQ,OAAM;AACnC,SAASC,KAAK,QAAQ,MAAK;AAC3B,OAAOC,UAAU,OAAM;AAEvB,MAAMC,MAAMC,QAAQC,GAAG,CAACC,QAAQ,KAAK;AACrC,MAAMC,WAAW;AACjB,MAAMC,OAAO;AACb,qEAAqE;AACrE,MAAMC,MAAMP,KAAK;IAAEC;IAAKI;IAAUC;AAAK;AACvC,MAAME,SAASD,IAAIE,iBAAiB;AAEpC,aAAa;AACbC,OAAOC,cAAc,CAACC,QAAQ,SAAS;IACrCC,OAAO;QAAEC,MAAM;IAAK;IACpBC,cAAc;AAChB;AAEAR,IAAIS,OAAO,GAAGC,IAAI,CAAC;IACjBnB,aAAa,CAACoB,KAAUC;QACtB,IAAI;YACF,gEAAgE;YAChE,uDAAuD;YACvD,MAAMC,YAAYrB,MAAMmB,IAAIG,GAAG,EAAE;YACjCb,OAAOU,KAAKC,KAAKC,WAAWE,KAAK,CAAC,CAACC;gBACjCC,QAAQC,KAAK,CAAC,2BAA2BP,IAAIG,GAAG,EAAEE;gBAClDJ,IAAIO,UAAU,GAAG;gBACjBP,IAAIQ,GAAG,CAAC;YACV;QACF,EAAE,OAAOJ,KAAK;YACZC,QAAQC,KAAK,CAAC,2BAA2BP,IAAIG,GAAG,EAAEE;YAClDJ,IAAIO,UAAU,GAAG;YACjBP,IAAIQ,GAAG,CAAC;QACV;IACF,GACGC,IAAI,CAAC,SAAS,CAACL;QACdC,QAAQC,KAAK,CAACF;QACdrB,QAAQ2B,IAAI,CAAC;IACf,GACCC,MAAM,CAACxB,MAAM;QACZkB,QAAQO,GAAG,CAAC,CAAC,kBAAkB,EAAE1B,SAAS,CAAC,EAAEC,KAAK,CAAC;IACrD;AACJ"}